# 更新日志

## [1.0.9] - 2025-01-30

### 修复
- 🚨 **关键修复**: 解决TOML配置文件解析错误
- 🔧 修复envsubst变量替换问题，改用sed进行模板处理
- 🔧 确保所有模板变量都被正确替换为实际值
- 🔧 解决"This float doesn't have a leading digit"错误

### 技术改进
- ✅ 使用sed替换envsubst，更可靠的模板处理
- ✅ 所有配置变量都有明确的默认值
- ✅ 生成的配置文件符合TOML语法规范

## [1.0.8] - 2025-01-30

### 调试改进
- 🔍 **调试增强**: 添加配置文件内容输出用于诊断
- 🔧 强制重新创建系统配置文件，避免缓存问题
- 🔧 在启动时显示生成的配置文件内容
- 🔧 帮助诊断Render部署中的端口绑定问题

### 技术改进
- ✅ 更好的调试信息输出
- ✅ 强制配置文件重新生成
- ✅ 便于排查配置问题

## [1.0.7] - 2025-01-30

### 修复
- 🚨 **关键修复**: 修复系统配置文件路径问题
- 🔧 确保配置文件正确写入`/root/.config/meme_generator/config.toml`
- 🔧 修复Docker启动脚本，创建正确的系统配置目录
- 🔧 解决应用读取默认配置而非自定义配置的问题

### 技术改进
- ✅ 配置文件现在会正确写入系统配置目录
- ✅ 支持Render平台的动态端口和host配置
- ✅ 确保服务绑定到0.0.0.0而非127.0.0.1

## [1.0.6] - 2025-01-30

### 修复
- 🚨 **关键修复**: 解决Render部署端口绑定问题
- 🔧 修复服务器host配置，从`127.0.0.1`改为`0.0.0.0`
- 🔧 支持Render平台的动态PORT环境变量
- 🔧 确保服务能够从外部访问

### 技术改进
- ✅ Render部署现在应该能正确绑定端口
- ✅ 支持云平台的动态端口分配
- ✅ 保持与原版项目的兼容性

## [1.0.5] - 2025-01-30

### 修复
- 🚨 **关键修复**: 彻底解决CLI命令解析问题
- 🔧 将启动方式从`python -m meme_generator.cli run`改为`python -m meme_generator.app`
- 🔧 绕过Alconna命令行解析器的兼容性问题
- 🔧 暂时禁用SBOM生成以避免CI/CD失败

### 技术改进
- ✅ Docker和Render部署现在应该能正常工作
- ✅ 直接使用FastAPI应用启动，更加稳定
- ✅ 简化了启动流程，减少了潜在的错误点

## [1.0.4] - 2025-01-30

### 修复
- 🔧 修复GitHub Actions工作流YAML语法错误
- 🔧 简化SBOM生成步骤中的镜像标签处理
- 🔧 移除可能导致解析错误的`fromJSON()`函数

### 文档改进
- 📚 新增完整的故障排除指南（298行）
- 🔍 涵盖Docker部署、依赖安装、配置等常见问题
- 🆘 提供详细的诊断和支持流程

## [1.0.3] - 2025-01-30

### 修复
- 🚨 **重要修复**: 修复Docker部署时的命令行参数错误
- 🔧 将启动命令从`python -m meme_generator.cli --host --port`改为`python -m meme_generator.cli run`
- 🔧 修复配置文件模板中的服务器地址设置
- 🔧 统一开发和生产环境的启动方式

### 技术改进
- ✅ Docker容器现在可以正常启动
- ✅ 服务器配置通过配置文件管理，更加规范
- ✅ 修复了Render等云平台部署失败的问题

## [1.0.2] - 2025-01-30

### 修复
- 🔧 修复SBOM生成步骤在Docker镜像不存在时的失败问题
- 🔧 添加`continue-on-error: true`确保CI流程不会因SBOM失败而中断
- 🔧 改进SBOM生成的条件判断和错误处理
- 🔧 优化镜像标签解析，使用JSON数组的第一个标签

### 技术改进
- ✅ 提高了CI/CD流程的健壮性
- ✅ 改进了错误处理和容错机制

## [1.0.1] - 2025-01-30

### 修复
- 🔧 修复GitHub Actions中使用已弃用的`actions/upload-artifact@v3`版本
- 🔧 更新到`actions/upload-artifact@v4`以符合GitHub最新要求
- 🔧 改进子模块检出配置，添加递归子模块支持

### 技术改进
- ✅ 所有GitHub Actions现在使用最新的稳定版本
- ✅ 改进了CI/CD流程的可靠性

## [1.0.0] - 2025-01-30

### 新功能
- 🎉 **项目初始发布** - 成功整合三个主要表情包生成器仓库
- 🚀 **统一架构** - 基于Git子模块的整合方案
- 🐳 **Docker支持** - 一键部署，包含完整环境
- 🔄 **自动同步** - GitHub Actions自动同步上游仓库更新
- 🌐 **翻译支持** - 支持百度翻译和OpenAI like API翻译
- 📚 **完整文档** - API文档、部署指南、设置指南

### 整合内容
- ✅ **meme-generator** (3,221文件) - 核心框架
- ✅ **meme-generator-contrib** (269文件) - 额外表情包
- ✅ **meme_emoji** (639文件) - 热门表情包扩展
- ✅ **总计350+表情包** 可用

### 自动化功能
- 🔄 每日自动检查上游更新
- 🔀 自动合并兼容的更新
- 🚨 冲突时创建PR进行人工处理
- 🏗️ 自动构建和发布Docker镜像
- 🔍 健康检查和监控

### 部署选项
- 🐳 **Docker Compose** - 生产环境一键部署
- 💻 **本地开发** - 开发环境快速启动
- ☁️ **云部署** - 支持各种云平台

### 配置管理
- ⚙️ 统一的TOML配置文件
- 🔐 环境变量支持
- 🎛️ 灵活的表情包目录配置
- 🚫 表情包禁用列表支持

### 文档
- 📖 **README.md** - 项目概述
- 🛠️ **SETUP_GUIDE.md** - 详细设置指南
- 🌐 **docs/API.md** - 完整REST API文档
- 🚀 **docs/DEPLOYMENT.md** - 生产环境部署指南

---

## 版本说明

- **主版本号**: 重大架构变更或不兼容更新
- **次版本号**: 新功能添加或重要改进
- **修订版本号**: 错误修复和小改进

## 贡献

欢迎提交Issue和Pull Request来改进项目！

## 许可证

本项目遵循MIT许可证，详见[LICENSE](LICENSE)文件。